
@{
    Layout = null;
}


<html>
<head>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="~/Assets/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="Assets/fontawesome-free-6.2.0-web/css/all.min.css">
    <link rel="stylesheet" href="~/Assets/admin/css/style.css">
    <link rel="stylesheet" href="~/Assets/admin/css/home.css">
</head>

<header class="header">
    <div id="header-top">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 mt-2">
                    <div class="header-logo">
                        <a href="Index"><img src="~/images/logo.png" style="margin-left: 50px"></a>
                    </div>
                </div>
                <div class="col-lg-4 mt-2">
                    <div class="wrap">
                        <form action="" class="search" method="post">
                            <input type="text" class="searchTerm" placeholder="Bạn muốn tìm gì?">
                            <button type="submit" class="searchButton">
                                <i class="fa-solid fa-magnifying-glass"></i>
                            </button>
                        </form>
                    </div>
                </div>
                <div class="col-lg-5 mt-2">
                    <div class="header-right">
                        <div class="sign">
                            <ul>
                                <li><a href="Home/loginn">Đăng nhập / Đăng ký</a></li>
                            </ul>
                        </div>
                        <a href="cart" class="cart">
                            <ul style="" onclick="goToCartPage()">
                                <li><i class="fa-solid fa-cart-shopping"></i></li>
                                <li>GIỎ HÀNG</li>
                                <li id="cartQuality">0</li>
                            </ul>
                            <div class="drop-cart">
                                <div class="dropcart-item">Không có sản phẩm nào.</div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="nav-main">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-9">

                    <div class="nav-header navbar navbar-expand-lg navbar-light">
                        <div class="collapse navbar-collapse " id="navbarNav">
                            <ul class="navbar-nav">
                                <li class="nav-item active">
                                    <a class="nav-link" href="Index">
                                        Trang chủ <span class="sr-only">(current)</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="About">Giới thiệu</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="product1">Cửa hàng</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="news">Tin tức thực phẩm</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="contact">Liên hệ</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
@RenderBody()
<script type="text/javascript">
    var cart = [];
    async function addProduct(id, product) {
        var product = { productId: id, product: product, quality: 1 };
  
        var currentCart = window.localStorage.getItem("cart");
        if (currentCart == null) {
            cart.push(product);
            await window.localStorage.setItem("cart", JSON.stringify(cart));
        } else {
            cart = JSON.parse(currentCart);
            var productExist = false;
            cart.forEach(p => {
                if(p.id == product.id) {
                p.quality++;
                productExist = true;
                }
        });
        if (!productExist) {
            cart.push(product);
        }
        await window.localStorage.removeItem("cart");
        await window.localStorage.setItem("cart", JSON.stringify(cart));
        }
         await ("cart", JSON.stringify(id));
         var cartQuality = await window.localStorage.getItem("cartQuality");
         if (cartQuality != null) {
             await window.localStorage.removeItem("cartQuality");
             await window.localStorage.setItem("cartQuality", JSON.stringify(Number(cartQuality) + 1));
         } else {
             await window.localStorage.setItem("cartQuality", JSON.stringify(1));
         }
        
         await setCardQuality();
     }

    async function setCardQuality() {
        var cartQuality = window.localStorage.getItem("cartQuality");
        if (cartQuality == null) {
            document.getElementById("cartQuality").innerHTML = 0;
            return
        }
        document.getElementById("cartQuality").innerHTML = cartQuality;
    }

    function goToCartPage() {
        var currentCart = window.localStorage.getItem("cart");
        if (currentCart != null) {
            $.ajax({
                type: 'POST',
                url: '/home/cart',
                contentType: 'application/x-www-form-urlencoded; charset=UTF-8', // when we use .serialize() this generates the data in query string format. this needs the default contentType (default content type is: contentType: 'application/x-www-form-urlencoded; charset=UTF-8') so it is optional, you can remove it
                data: JSON.parse(currentCart),
                success: function (result) {
                    console.log(result);
                },
                error: function () {
                    alert('Failed to receive the Data');
                    console.log('Failed ');
                }
            })
        }
    }

    document.body.onload = function () {
        setCardQuality();
    };

</script>
<footer id="footer-main">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="footer__about">
                    <div class="footer__widget">
                        <h5>Đăng ký nhận tin khuyến mãi </h5>
                        <p>Để lại email để nhận được thông tin khuyến mãi mới nhất</p>
                        <form action="#">
                            <input type="text" placeholder="Nhập email của bạn">
                            <button type="button" class="btn btn-success">Đăng ký</button>
                        </form>

                        <div class="footer__widget__social">
                            <a href="#"><i class="fa-brands fa-facebook"></i></a>
                            <a href="#"><i class="fa-brands fa-instagram"></i></a>
                            <!-- <a href="#"><i class="fa-brands fa-phone"></i></a> -->
                            <!-- <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-pinterest"></i></a> -->
                        </div>
                    </div>
                    <div class="footer__about__logo">
                        <a href="./index.html"><img src="img/logo.png" alt=""></a>
                    </div>

                </div>
            </div>
            <div class="col-lg-5 col-md-6 col-sm-6">
                <div class="footer__widget row">
                    <ul class="col-lg-6">
                        <li><a href="index">Trang chủ</a></li>
                        <li><a href="about">Giới thiệu</a></li>
                        <li><a href="product1">Sản phẩm</a></li>

                    </ul>
                    <ul class="col-lg-6">
                        <li><a href="news">Tin tức</a></li>
                        <li><a href="contact">Liên hệ</a></li>
                        <li><a href="login">Đăng nhập/ Đăng kí</a></li>

                    </ul>

                </div>
            </div>
            <div class="col-lg-3 col-md-12">
                <div class="footer__contact">
                    <ul>
                        <h5>Thông tin liên hệ</h5>
                        <li><span><i class="fa fa-map-marker"></i>&nbsp;</span>Địa chỉ: TP.HCM, Việt Nam</li>
                        <li><span><i class="fa fa-phone"></i>&nbsp;</span>Điện thoại: +84-123-4567</li>
                        <li><span><i class="fa fa-envelope"></i>&nbsp;</span>Email: taporganic@gmail.com</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="footer__copyright">
                    <div class="footer__copyright__text">
                        <p>
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                            Copyright &copy;
                            <script>document.write(new Date().getFullYear());</script>
                            Nhóm 20 - TAP ORGANIC
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        </p>
                    </div>
                    <div class="footer__copyright__payment"><img src="img/payment-item.png" alt=""></div>
                </div>
            </div>
        </div>
    </div>
</footer>
@Scripts.Render("~/Scripts/jquery")
@RenderSection("scripts", required: false)
</html>
